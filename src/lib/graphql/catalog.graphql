query getProducts($sku: String!) {
  products(filter: { sku: { eq: $sku } }) {
    items {
      id
      name
      description {
        html
      }
      sku
      stock_status
      only_x_left_in_stock
      price_range {
        minimum_price {
          regular_price {
            value
            currency
          }
        }
      }
      image {
        url
      }
      url_key
      type_id

      rating_summary
      review_count
      reviews {
        items {
          summary
          average_rating
          nickname
          text
          created_at
        }
      }

      ... on ConfigurableProduct {
        configurable_options {
          attribute_code
          attribute_id
          label
          position
          values {
            uid
            label
          }
        }
      }
    }
  }
}

query getCategories($urlKey: String = "ODAw") {
  categories(filters: { url_key: { eq: $urlKey } }) {
    items {
      id
      name
      url_key
      children {
        url_key
        uid
        url_path
        category_abbrv
        name
        image
        thumbnail
      }
    }
  }
}

query getCategoriesLong($cat_id: String = "ODAw") {
  categories(filters: { category_uid: { eq: $cat_id } }) {
    items {
      name
      uid
      children {
        uid
        url_path
        category_abbrv
        name

        description
        image
        relative_url

        cms_block {
          content
          title
        }
      }
    }
  }
}

query getNavCategories {
  categories {
    items {
      name
      id
      children {
        uid
        url_path
        category_abbrv
        name
        image
        thumbnail
      }
    }
  }
}

query getCategoryProducts($id: Int!) {
  category(id: $id) {
    products {
      items {
        id
        name
        sku
        price_range {
          minimum_price {
            regular_price {
              value
              currency
            }
          }
        }
        image {
          url
        }
        url_key
      }
    }
  }
}

query searchProducts(
  $query: String!
  $pageSize: Int!
  $currentPage: Int!
  $sort: ProductAttributeSortInput!
) {
  products(
    search: $query
    pageSize: $pageSize
    currentPage: $currentPage
    sort: $sort
  ) {
    total_count
    items {
      id
      name
      sku
      price_range {
        minimum_price {
          regular_price {
            value
            currency
          }
        }
      }
      image {
        url
      }
      url_key
    }
  }
}

query getRecommendedProducts {
  products(filter: { destacado_home: { eq: "1" } }) {
    items {
      sku
      name
      categories {
        name
      }
      canonical_url
      image {
        url
      }
      price {
        regularPrice {
          amount {
            currency
            value
          }
        }
      }
      rating_summary
    }
  }
}

query getNewProducts {
  products(filter: { novedad: { from: "2022-10-28 00:00:00" } }) {
    items {
      sku
      name
      categories {
        name
      }
      canonical_url
      image {
        url
      }
      price {
        regularPrice {
          amount {
            currency
            value
          }
        }
      }
      rating_summary
    }
  }
}

query getOpportunities {
  products(filter: { coleccion: { match: "TC" } }) {
    items {
      sku
      name
      categories {
        name
      }
      canonical_url
      image {
        url
      }
      price {
        regularPrice {
          amount {
            currency
            value
          }
        }
      }
      rating_summary
    }
  }
}

query getLiquidations {
  products(filter: { cst: { eq: "1" } }) {
    items {
      sku
      name
      categories {
        name
      }
      canonical_url
      image {
        url
      }
      price {
        regularPrice {
          amount {
            currency
            value
          }
        }
      }
      rating_summary
    }
  }
}
